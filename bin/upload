#!/bin/sh

usage() {
  cat << HEREDOC
upload

Usage: upload <file_name> [<uploaded_name>]
HEREDOC
}

upload() {
  if [ $# -eq 0 ]; then
    usage
    
    return 0
  fi

  input_file_name="$1"
  upload_file_name="${2:-$1}"
  bucket="$GSUTILS_DEFAULT_BUCKET"

  gsutil cp "$input_file_name" "gs://$bucket/$upload_file_name"

  echo "https://$bucket/$upload_file_name"
} 

upload "$@"
